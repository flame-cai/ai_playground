{"version":3,"sources":["components/AuthContext.js","components/Chat.js","components/GoogleAuth.js","components/loadGoogleScript.js","components/LoginPage.js","components/protectedRoute.js","App.js","reportWebVitals.js","index.js"],"names":["AuthContext","createContext","token","setToken","Chat","_ref","temperature","maxTokens","messages","setMessages","useState","input","setInput","systemMessage","setSystemMessage","messageEndRef","useRef","user","setUser","useContext","useEffect","storedUser","localStorage","getItem","JSON","parse","role","content","current","scrollIntoView","behavior","React","createElement","className","value","onChange","e","target","placeholder","rows","map","msg","index","key","concat","src","alt","part","idx","startsWith","replace","trim","wordTranslationsString","match","grp","String","fromCharCode","parseInt","slice","splitArray","arr","result","tempWord","fr","en","includes","push","mergePunctuations","split","element","console","log","_ref2","wIdx","word","translation","error","ref","type","onKeyDown","async","userMessage","prevMessages","response","axios","post","parseFloat","headers","data","sendMessage","GoogleSignIn","onLoginSuccess","isGoogleLoaded","setIsGoogleLoaded","Promise","resolve","document","querySelector","script","id","defer","onload","body","appendChild","loadGoogleAndInitialize","window","google","handleCredentialResponse","credential","backendResponse","accounts","initialize","client_id","callback","renderButton","getElementById","theme","size","LoginPage","isLoaded","setIsLoaded","hasReloaded","setHasReloaded","performance","navigation","checkGoogleApiLoaded","gapi","setTimeout","timer","location","reload","clearTimeout","style","display","ProtectedRoute","children","Navigate","to","App","setTemperature","setMaxTokens","logoutTimerRef","handleLogout","removeItem","resetLogoutTimer","alert","addEventListener","removeEventListener","Router","Link","min","max","step","onClick","Routes","Fragment","Route","path","userData","expiresIn","setItem","stringify","expiryTime","Date","getTime","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","render","StrictMode"],"mappings":"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","file":"static/js/main.ed2d1ca6.chunk.js","sourcesContent":["// AuthContext.js\r\nimport React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\n// Create the AuthContext\r\nconst AuthContext = createContext({ token: null, setToken: () => {} });\r\n\r\n// Provider component\r\nexport const AuthProvider = ({ children }) => {\r\n  const [token, setToken] = useState(localStorage.getItem('token') || null);\r\n\r\n  useEffect(() => {\r\n    // Whenever token changes, update localStorage\r\n    if (token) {\r\n      localStorage.setItem('token', token);\r\n      console.log(token)\r\n    } else {\r\n      localStorage.removeItem('token');\r\n    }\r\n  }, [token]);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ token, setToken }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\n// Custom hook for using the AuthContext\r\nexport const useAuth = () => useContext(AuthContext);","// src/components/Chat.js\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport '../App.css';\nimport { useAuth } from './AuthContext';\n\nfunction mergePunctuations(arr) {\n  const result = [];\n  let tempWord = ['', ''];\n\n  for (const [fr, en] of arr) {\n    if ('.,!?'.includes(fr)) {\n      tempWord[0] += fr;\n      tempWord[1] += en;\n    } else {\n      if (tempWord[0]) {\n        result.push(tempWord);\n        tempWord = ['', ''];\n      }\n      tempWord = [fr, en];\n    }\n  }\n\n  if (tempWord[0]) {\n    result.push(tempWord);\n  }\n\n  return result;\n}\n\nconst Chat = ({ temperature, maxTokens }) => {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [systemMessage, setSystemMessage] = useState('');\n  const messageEndRef = useRef(null);\n  const [user, setUser] = useState(null);\n  const { token } = useAuth();\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    if (storedUser) {\n      setUser(JSON.parse(storedUser));\n    }\n  }, []);\n\n  useEffect(() => {\n    if (user) {\n      setMessages([{\n        role: 'assistant',\n        content: [\"Hello, I am GPT-4. AMA.\"]\n      }]);\n    }\n  }, [user]);\n\n  useEffect(() => {\n    if (messageEndRef.current) {\n      messageEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [messages]);\n\n  const sendMessage = async () => {\n    if (!input.trim()) return;\n\n    const userMessage = { role: 'user', content: input };\n    setMessages(prevMessages => [...prevMessages, userMessage]);\n    setInput('');\n\n    try {\n      const response = await axios.post('https://0178149ac5702850e1a14d1edf26ee78.serveo.net/chat', {\n        messages: [...messages, userMessage],\n        systemMessage,\n        temperature: parseFloat(temperature),\n        maxTokens: parseInt(maxTokens)\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n      console.log('Chat data:', token);\n      console.log('Server response:', response.data);\n      setMessages(prevMessages => [...prevMessages, response.data]);\n    } catch (error) {\n      console.error(\"Error sending message:\", error);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      sendMessage();\n    }\n  };\n\n  const renderMessage = (content) => {\n    if (typeof content === 'string') {\n      return <p>{content}</p>;\n    }\n\n    return content.map((part, idx) => {\n      if (typeof part === 'string' && part.startsWith('[Correction]')) {\n        return <p key={idx} className=\"correction\">{part.replace('[Correction]', '').trim()}</p>;\n      } else if (typeof part === 'string' && part.startsWith('[Response]')) {\n        try {\n          let wordTranslationsString = part.replace(/\\\\u([\\dA-Fa-f]{4})/g, (match, grp) => String.fromCharCode(parseInt(grp, 16))).replace('[Response]', '').trim().replace(/\\(/g, '[').replace(/\\)/g, ']').replace(/\\\\\"/g, '').replace(/\\\\/g, '').replace(/,\\s*\\[/g,'--\\[').replace(/,/g, '--').replace(/----/g, ',--').replace(/,--\\s*--/g, ',--,').replace(/--\\]/g,',]').slice(1,-1);\n          let outerArray = wordTranslationsString.slice(2, -2).split(']--[');\n          let splitArray = mergePunctuations(outerArray.map(element => element.split('--')));\n          console.log(wordTranslationsString);\n          console.log(splitArray);\n\n          return (\n            <p key={idx} className=\"text-container\">\n              {splitArray.map(([word, translation], wIdx) => (\n                <span key={wIdx} className=\"hoverable-word\">{word + \" \"}\n                  <span className=\"tooltiptext badge badge-light\">{translation}</span>\n                </span>\n              ))}\n            </p>\n          );\n        } catch (error) {\n          console.error(\"Error parsing response:\", error);\n          return <p key={idx}>{part}</p>;\n        }\n      } else if (typeof part === 'string' && part.startsWith('[Translation]')) {\n        return <p key={idx} className=\"translation\">{part.replace('[Translation]', '').trim()}</p>;\n      }\n      return <p key={idx}>{part}</p>;\n    });\n  };\n\n  return (\n    <div className=\"chat-container\">\n      <h1>Conversation Tool</h1>\n      <hr />\n      \n      <div className=\"p-4 mb-4 border rounded\">\n        <h2 className=\"text-lg font-semibold mb-2\">System Message</h2>\n        <textarea\n          className=\"w-full p-2 border rounded\"\n          value={systemMessage}\n          onChange={(e) => setSystemMessage(e.target.value)}\n          placeholder=\"Enter system message here...\"\n          rows=\"3\"\n        />\n      </div>\n\n      <div className=\"message-container\">\n        {messages.map((msg, index) => (\n          <div key={index} className={`message-row ${msg.role}-row`}>\n            {msg.role === 'assistant' && (\n              <div className=\"profile-picture-container\">\n                <img src='logo192.png' alt={`${msg.role} profile picture`} className={`profile-picture`} />\n              </div>\n            )}\n            <div className={`message ${msg.role}`}>\n              {renderMessage(msg.content)}\n            </div>\n            {msg.role !== 'assistant' && (\n              <div className=\"profile-picture-container\">\n                <img src='flame_img.jpeg' alt={`${msg.role} profile picture`} className={`profile-picture`} />\n              </div>\n            )}\n          </div>\n        ))}\n        <div ref={messageEndRef} />\n      </div>\n\n      <div className=\"input-container\">\n        <input\n          type=\"text\"\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          onKeyDown={handleKeyPress}\n          placeholder=\"Type your message...\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n","// src/components/GoogleSignIn.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { loadGoogleScript } from './loadGoogleScript';\r\n\r\nconst GoogleSignIn = ({ onLoginSuccess }) => {\r\n  const [isGoogleLoaded, setIsGoogleLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const loadGoogleAndInitialize = async () => {\r\n      await loadGoogleScript();\r\n      setIsGoogleLoaded(true);\r\n    };\r\n\r\n    loadGoogleAndInitialize();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isGoogleLoaded && window.google) {\r\n      const handleCredentialResponse = async (response) => {\r\n        console.log(\"Encoded JWT ID token: \" + response.credential);\r\n        try {\r\n          const backendResponse = await axios.post('https://0178149ac5702850e1a14d1edf26ee78.serveo.net/login', {\r\n            token: response.credential\r\n          });\r\n          console.log('Login success:', backendResponse.data);\r\n          onLoginSuccess(backendResponse.data);\r\n        } catch (error) {\r\n          console.error('Login failed:', error);\r\n        }\r\n      };\r\n\r\n      window.google.accounts.id.initialize({\r\n        client_id: '1066118926351-dskshp8i64e3e4i5rr76h85rfbhh5cc0.apps.googleusercontent.com', // Replace with your actual client ID\r\n        callback: handleCredentialResponse\r\n      });\r\n\r\n      window.google.accounts.id.renderButton(\r\n        document.getElementById(\"googleSignInDiv\"),\r\n        { theme: \"outline\", size: \"large\" }\r\n      );\r\n    }\r\n  }, [isGoogleLoaded, onLoginSuccess]);\r\n\r\n  return <div id=\"googleSignInDiv\"></div>;\r\n};\r\n\r\nexport default GoogleSignIn;\r\n","// src/loadGoogleScript.js\r\nexport const loadGoogleScript = () => {\r\n  return new Promise((resolve) => {\r\n    if (document.querySelector('script#google-login')) {\r\n      resolve();\r\n      return;\r\n    }\r\n    const script = document.createElement('script');\r\n    script.src = 'https://accounts.google.com/gsi/client';\r\n    script.id = 'google-login';\r\n    script.async = true;\r\n    script.defer = true;\r\n    script.onload = () => resolve();\r\n    document.body.appendChild(script);\r\n  });\r\n};\r\n","// src/components/LoginPage.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport GoogleSignIn from './GoogleAuth';\r\nimport '../App.css'; // Import CSS for styling\r\n\r\nconst LoginPage = ({ onLoginSuccess }) => {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [hasReloaded, setHasReloaded] = useState(false); // Track if page has been reloaded\r\n\r\n  useEffect(() => {\r\n    if (window.performance.navigation.type === 1) {\r\n      setHasReloaded(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Check if Google API is loaded\r\n    const checkGoogleApiLoaded = () => {\r\n      if (window.gapi && window.gapi.accounts.id) {\r\n        setIsLoaded(true);\r\n      } else {\r\n        setTimeout(checkGoogleApiLoaded, 100); // Check again after 100ms\r\n      }\r\n    };\r\n\r\n    checkGoogleApiLoaded();\r\n\r\n    // Reload the page only if it hasn't been reloaded before\r\n    if (!hasReloaded) {\r\n      const timer = setTimeout(() => {\r\n        if (!isLoaded) {\r\n          window.location.reload();\r\n        }\r\n      }, 1000); // Adjust delay as needed\r\n\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [isLoaded, hasReloaded]);\r\n  return (\r\n    <div className=\"login-container\">\r\n      <div className=\"image-container\">\r\n        <img src=\"/flame_img.jpeg\" alt=\"Logo 1\" className=\"logo-image\" />\r\n        <div className=\"vertical-line\"></div>\r\n        <img src=\"/CAI_logo.jpg\" alt=\"Logo 2\" className=\"logo-image\" />\r\n      </div>\r\n      <h1>Welcome to the AI Language Practice Application</h1>\r\n      {/* <h4><i>Built by CAI</i></h4> */}\r\n      <p>Please log in to continue</p>\r\n      <div className=\"google-signin-button\">\r\n      <div style={{ display: 'inline-block' }}>\r\n        <GoogleSignIn onLoginSuccess={onLoginSuccess} />\r\n      </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;","// src/components/ProtectedRoute.js\r\nimport React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst ProtectedRoute = ({ user, children }) => {\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;","// src/components/App.js\nimport React, { useState, useEffect, useRef } from 'react';\nimport { HashRouter as Router, Route, Routes, Link, Navigate } from 'react-router-dom';\nimport './App.css';\nimport Chat from './components/Chat';\nimport LoginPage from './components/LoginPage';\nimport ProtectedRoute from './components/protectedRoute';\nimport { AuthProvider } from './components/AuthContext';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [temperature, setTemperature] = useState(0.3);\n  const [maxTokens, setMaxTokens] = useState(100);\n  const logoutTimerRef = useRef(null);\n\n  const handleLoginSuccess = (userData) => {\n    const { token, expiresIn } = userData;\n    setUser(userData);\n    localStorage.setItem('user', JSON.stringify(userData));\n    localStorage.setItem('token', token);\n\n    const expiryTime = new Date().getTime() + expiresIn * 6 * 60 * 60 * 1000;\n    localStorage.setItem('expiryTime', expiryTime);\n    resetLogoutTimer();\n  };\n\n  const handleLogout = () => {\n    setUser(null);\n    localStorage.removeItem('user');\n    clearTimeout(logoutTimerRef.current);\n    localStorage.removeItem('user');\n    localStorage.removeItem('token');\n    localStorage.removeItem('expiryTime');\n  };\n\n  const resetLogoutTimer = () => {\n    clearTimeout(logoutTimerRef.current);\n    logoutTimerRef.current = setTimeout(() => {\n      alert('You have been logged out due to inactivity.');\n      handleLogout();\n    }, 30 * 60 * 1000);\n  };\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    if (storedUser) {\n      setUser(JSON.parse(storedUser));\n    }\n    window.addEventListener('mousemove', resetLogoutTimer);\n    window.addEventListener('keydown', resetLogoutTimer);\n\n    return () => {\n      window.removeEventListener('mousemove', resetLogoutTimer);\n      window.removeEventListener('keydown', resetLogoutTimer);\n      clearTimeout(logoutTimerRef.current);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (user) {\n      resetLogoutTimer();\n    }\n  }, [user]);\n\n  return (\n    <Router>\n      <div className=\"App d-flex\">\n        {user && (\n          <nav className=\"sidebar d-flex flex-column align-items-center\">\n            <div className=\"logo my-3\">\n              <img src=\"flame_img.jpeg\" alt=\"FLAME Logo\" className=\"img-fluid\" />\n            </div>\n            <hr className=\"w-75\" />\n            <ul className=\"nav flex-column w-100 text-center\">\n              <li className=\"nav-item\">\n                <Link to=\"/conversation-companion\" className=\"nav-link\">Conversation Tool</Link>\n              </li>\n            </ul>\n            <div className=\"mt-auto w-100 p-3\">\n              <h3 className=\"text-center mb-3\">Parameters</h3>\n              <div className=\"mb-3\">\n                <label className=\"d-block mb-2\">\n                  Temperature: {temperature}\n                </label>\n                <input\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"1\"\n                  step=\"0.1\"\n                  value={temperature}\n                  onChange={(e) => setTemperature(e.target.value)}\n                  className=\"w-100\"\n                />\n              </div>\n              <div>\n                <label className=\"d-block mb-2\">\n                  Max Tokens: {maxTokens}\n                </label>\n                <input\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"1000\"\n                  step=\"100\"\n                  value={maxTokens}\n                  onChange={(e) => setMaxTokens(e.target.value)}\n                  className=\"w-100\"\n                />\n              </div>\n            </div>\n          </nav>\n        )}\n        <div className=\"content flex-grow-1\">\n          {user && (\n            <div className=\"logout-container\">\n              <button onClick={handleLogout} className=\"logout-button\">Logout</button>\n            </div>\n          )}\n          <Routes>\n            {!user ? (\n              <>\n                <Route path=\"/login\" element={<LoginPage onLoginSuccess={handleLoginSuccess} />} />\n                <Route path=\"*\" element={<Navigate to=\"/login\" />} />\n              </>\n            ) : (\n              <>\n                <Route \n                  path=\"/conversation-companion\" \n                  element={\n                    <ProtectedRoute user={user}>\n                      <Chat \n                        temperature={temperature} \n                        maxTokens={maxTokens} \n                      />\n                    </ProtectedRoute>\n                  } \n                />\n                <Route path=\"*\" element={<Navigate to=\"/conversation-companion\" />} />\n              </>\n            )}\n          </Routes>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById('root'));\r\nroot.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}